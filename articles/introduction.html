<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to precrec â€¢ precrec</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to precrec">
<meta property="og:description" content="precrec">
<meta property="og:image" content="https://evalclass.github.io/precrec/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">precrec</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.14.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/introduction.html">Introduction</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Change log</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/evalclass/precrec/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to precrec</h1>
            
            <h4 data-toc-skip class="date">2023-03-11</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/evalclass/precrec/blob/main/vignettes/introduction.Rmd" class="external-link"><code>vignettes/introduction.Rmd</code></a></small>
      <div class="hidden name"><code>introduction.Rmd</code></div>

    </div>

    
    
<p>The <code>precrec</code> package provides accurate computations of
ROC and Precision-Recall curves.</p>
<div class="section level2">
<h2 id="basic-functions">1. Basic functions<a class="anchor" aria-label="anchor" href="#basic-functions"></a>
</h2>
<p>The <code>evalmod</code> function calculates ROC and Precision-Recall
curves and returns an S3 object.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/evalclass/precrec" class="external-link">precrec</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load a test dataset</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">P10N10</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Calculate ROC and Precision-Recall curves</span></span>
<span><span class="va">sscurves</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/evalmod.html">evalmod</a></span><span class="op">(</span>scores <span class="op">=</span> <span class="va">P10N10</span><span class="op">$</span><span class="va">scores</span>, labels <span class="op">=</span> <span class="va">P10N10</span><span class="op">$</span><span class="va">labels</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="s3-generics">S3 generics<a class="anchor" aria-label="anchor" href="#s3-generics"></a>
</h3>
<p>The R language specifies S3 objects and S3 generic functions as part
of the most basic object-oriented system in R. The <code>precrec</code>
package provides nine S3 generics for the S3 object created by the
<code>evalmod</code> function.</p>
<table class="table">
<thead><tr class="header">
<th align="left">S3 generic</th>
<th align="left">Package</th>
<th align="left">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">print</td>
<td align="left">base</td>
<td align="left">Print the calculation results and the summary of the
test data</td>
</tr>
<tr class="even">
<td align="left">as.data.frame</td>
<td align="left">base</td>
<td align="left">Convert a precrec object to a data frame</td>
</tr>
<tr class="odd">
<td align="left">plot</td>
<td align="left">graphics</td>
<td align="left">Plot performance evaluation measures</td>
</tr>
<tr class="even">
<td align="left">autoplot</td>
<td align="left">ggplot2</td>
<td align="left">Plot performance evaluation measures with ggplot2</td>
</tr>
<tr class="odd">
<td align="left">fortify</td>
<td align="left">ggplot2</td>
<td align="left">Prepare a data frame for ggplot2</td>
</tr>
<tr class="even">
<td align="left">auc</td>
<td align="left">precrec</td>
<td align="left">Make a data frame with AUC scores</td>
</tr>
<tr class="odd">
<td align="left">part</td>
<td align="left">precrec</td>
<td align="left">Set partial curves and calculate AUC scores</td>
</tr>
<tr class="even">
<td align="left">pauc</td>
<td align="left">precrec</td>
<td align="left">Make a data frame with pAUC scores</td>
</tr>
<tr class="odd">
<td align="left">auc_ci</td>
<td align="left">precrec</td>
<td align="left">Calculate confidence intervals of AUC scores</td>
</tr>
</tbody>
</table>
<div class="section level4">
<h4 id="example-of-the-plot-function">Example of the plot function<a class="anchor" aria-label="anchor" href="#example-of-the-plot-function"></a>
</h4>
<p>The <code>plot</code> function outputs ROC and Precision-Recall
curves</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Show ROC and Precision-Recall plots</span></span>
<span><span class="fu"><a href="../reference/plot.html">plot</a></span><span class="op">(</span><span class="va">sscurves</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Show a Precision-Recall plot</span></span>
<span><span class="fu"><a href="../reference/plot.html">plot</a></span><span class="op">(</span><span class="va">sscurves</span>, <span class="st">"PRC"</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-2-1.png" width="672"><img src="introduction_files/figure-html/unnamed-chunk-2-2.png" width="672"></p>
</div>
<div class="section level4">
<h4 id="example-of-the-autoplot-function">Example of the autoplot function<a class="anchor" aria-label="anchor" href="#example-of-the-autoplot-function"></a>
</h4>
<p>The <code>autoplot</code> function outputs ROC and Precision-Recall
curves by using the <code>ggplot2</code> package.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The ggplot2 package is required</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Show ROC and Precision-Recall plots</span></span>
<span><span class="fu"><a href="../reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">sscurves</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Show a Precision-Recall plot</span></span>
<span><span class="fu"><a href="../reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">sscurves</span>, <span class="st">"PRC"</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-3-1.png" width="672"><img src="introduction_files/figure-html/unnamed-chunk-3-2.png" width="672"></p>
<p>Reduced supporting points make the plotting speed faster for large
data sets.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 5 data sets with 50000 positives and 50000 negatives</span></span>
<span><span class="va">samp1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_sim_samples.html">create_sim_samples</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">50000</span>, <span class="fl">50000</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Calculate curves</span></span>
<span><span class="va">eval1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/evalmod.html">evalmod</a></span><span class="op">(</span>scores <span class="op">=</span> <span class="va">samp1</span><span class="op">$</span><span class="va">scores</span>, labels <span class="op">=</span> <span class="va">samp1</span><span class="op">$</span><span class="va">labels</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Reduced supporting points</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="fu"><a href="../reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">eval1</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Full supporting points</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="fu"><a href="../reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">eval1</span>, reduce_points <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    user  system elapsed </span></span>
<span><span class="co">##   0.062   0.008   0.070 </span></span>
<span><span class="co">##    user  system elapsed </span></span>
<span><span class="co">##   0.553   0.028   0.582</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="example-of-the-auc-function">Example of the auc function<a class="anchor" aria-label="anchor" href="#example-of-the-auc-function"></a>
</h4>
<p>The <code>auc</code> function outputs a data frame with the AUC (Area
Under the Curve) scores.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get a data frame with AUC scores</span></span>
<span><span class="va">aucs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/auc.html">auc</a></span><span class="op">(</span><span class="va">sscurves</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use knitr::kable to display the result in a table format</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">aucs</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">modnames</th>
<th align="right">dsids</th>
<th align="left">curvetypes</th>
<th align="right">aucs</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">m1</td>
<td align="right">1</td>
<td align="left">ROC</td>
<td align="right">0.7200000</td>
</tr>
<tr class="even">
<td align="left">m1</td>
<td align="right">1</td>
<td align="left">PRC</td>
<td align="right">0.7397716</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get AUCs of Precision-Recall</span></span>
<span><span class="va">aucs_prc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">aucs</span>, <span class="va">curvetypes</span> <span class="op">==</span> <span class="st">"PRC"</span><span class="op">)</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">aucs_prc</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">modnames</th>
<th align="right">dsids</th>
<th align="left">curvetypes</th>
<th align="right">aucs</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">2</td>
<td align="left">m1</td>
<td align="right">1</td>
<td align="left">PRC</td>
<td align="right">0.7397716</td>
</tr></tbody>
</table>
</div>
<div class="section level4">
<h4 id="example-of-the-as-data-frame-function">Example of the as.data.frame function<a class="anchor" aria-label="anchor" href="#example-of-the-as-data-frame-function"></a>
</h4>
<p>The <code>as.data.frame</code> function converts a precrec object to
a data frame.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convert sscurves to a data frame</span></span>
<span><span class="va">sscurves.df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="va">sscurves</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use knitr::kable to display the result in a table format</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">sscurves.df</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">x</th>
<th align="right">y</th>
<th align="left">modname</th>
<th align="left">dsid</th>
<th align="left">type</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0.000</td>
<td align="right">0.0</td>
<td align="left">m1</td>
<td align="left">1</td>
<td align="left">ROC</td>
</tr>
<tr class="even">
<td align="right">0.000</td>
<td align="right">0.1</td>
<td align="left">m1</td>
<td align="left">1</td>
<td align="left">ROC</td>
</tr>
<tr class="odd">
<td align="right">0.000</td>
<td align="right">0.2</td>
<td align="left">m1</td>
<td align="left">1</td>
<td align="left">ROC</td>
</tr>
<tr class="even">
<td align="right">0.001</td>
<td align="right">0.2</td>
<td align="left">m1</td>
<td align="left">1</td>
<td align="left">ROC</td>
</tr>
<tr class="odd">
<td align="right">0.002</td>
<td align="right">0.2</td>
<td align="left">m1</td>
<td align="left">1</td>
<td align="left">ROC</td>
</tr>
<tr class="even">
<td align="right">0.003</td>
<td align="right">0.2</td>
<td align="left">m1</td>
<td align="left">1</td>
<td align="left">ROC</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section level2">
<h2 id="data-preparation">2. Data preparation<a class="anchor" aria-label="anchor" href="#data-preparation"></a>
</h2>
<p>The <code>precrec</code> package provides four functions for data
preparation.</p>
<table class="table">
<thead><tr class="header">
<th align="left">Function</th>
<th align="left">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">join_scores</td>
<td align="left">Join scores of multiple models into a list</td>
</tr>
<tr class="even">
<td align="left">join_labels</td>
<td align="left">Join observed labels of multiple test datasets into a
list</td>
</tr>
<tr class="odd">
<td align="left">mmdata</td>
<td align="left">Reformat input data for performance evaluation
calculation</td>
</tr>
<tr class="even">
<td align="left">create_sim_samples</td>
<td align="left">Create random samples for simulations</td>
</tr>
</tbody>
</table>
<div class="section level3">
<h3 id="example-of-the-join_scores-function">Example of the join_scores function<a class="anchor" aria-label="anchor" href="#example-of-the-join_scores-function"></a>
</h3>
<p>The <code>join_scores</code> function combines multiple score
datasets.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">s1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span></span>
<span><span class="va">s2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">6</span>, <span class="fl">7</span>, <span class="fl">8</span><span class="op">)</span></span>
<span><span class="va">s3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">8</span>, <span class="fl">4</span>, <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Join two score vectors</span></span>
<span><span class="va">scores1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/join_scores.html">join_scores</a></span><span class="op">(</span><span class="va">s1</span>, <span class="va">s2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Join two vectors and a matrix</span></span>
<span><span class="va">scores2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/join_scores.html">join_scores</a></span><span class="op">(</span><span class="va">s1</span>, <span class="va">s2</span>, <span class="va">s3</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-of-the-join_labels-function">Example of the join_labels function<a class="anchor" aria-label="anchor" href="#example-of-the-join_labels-function"></a>
</h3>
<p>The <code>join_labels</code> function combines multiple score
datasets.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">l1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">l2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">l3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Join two label vectors</span></span>
<span><span class="va">labels1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/join_labels.html">join_labels</a></span><span class="op">(</span><span class="va">l1</span>, <span class="va">l2</span><span class="op">)</span></span>
<span><span class="va">labels2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/join_labels.html">join_labels</a></span><span class="op">(</span><span class="va">l1</span>, <span class="va">l3</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-of-the-mmdata-function">Example of the mmdata function<a class="anchor" aria-label="anchor" href="#example-of-the-mmdata-function"></a>
</h3>
<p>The <code>mmdata</code> function makes an input dataset for the
<code>evalmod</code> function.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create an input dataset with two score vectors and one label vector</span></span>
<span><span class="va">msmdat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mmdata.html">mmdata</a></span><span class="op">(</span><span class="va">scores1</span>, <span class="va">labels1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Specify dataset IDs</span></span>
<span><span class="va">smmdat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mmdata.html">mmdata</a></span><span class="op">(</span><span class="va">scores1</span>, <span class="va">labels2</span>, dsids <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Specify model names and dataset IDs</span></span>
<span><span class="va">mmmdat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mmdata.html">mmdata</a></span><span class="op">(</span><span class="va">scores1</span>, <span class="va">labels2</span>,</span>
<span>  modnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mod1"</span>, <span class="st">"mod2"</span><span class="op">)</span>,</span>
<span>  dsids <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-of-the-create_sim_samples-function">Example of the create_sim_samples function<a class="anchor" aria-label="anchor" href="#example-of-the-create_sim_samples-function"></a>
</h3>
<p>The <code>create_sim_samples</code> function is useful to make a
random sample dataset with different performance levels.</p>
<table class="table">
<thead><tr class="header">
<th align="left">Level name</th>
<th align="left">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">random</td>
<td align="left">Random</td>
</tr>
<tr class="even">
<td align="left">poor_er</td>
<td align="left">Poor early retrieval</td>
</tr>
<tr class="odd">
<td align="left">good_er</td>
<td align="left">Good early retrieval</td>
</tr>
<tr class="even">
<td align="left">excel</td>
<td align="left">Excellent</td>
</tr>
<tr class="odd">
<td align="left">perf</td>
<td align="left">Perfect</td>
</tr>
<tr class="even">
<td align="left">all</td>
<td align="left">All of the above</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># A dataset with 10 positives and 10 negatives for the random performance level</span></span>
<span><span class="va">samps1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_sim_samples.html">create_sim_samples</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">10</span>, <span class="st">"random"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#  A dataset for five different performance levels</span></span>
<span><span class="va">samps2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_sim_samples.html">create_sim_samples</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">10</span>, <span class="st">"all"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># A dataset with 20 samples for the good early retrieval performance level</span></span>
<span><span class="va">samps3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_sim_samples.html">create_sim_samples</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">10</span>, <span class="fl">10</span>, <span class="st">"good_er"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># A dataset with 20 samples for five different performance levels</span></span>
<span><span class="va">samps4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_sim_samples.html">create_sim_samples</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">10</span>, <span class="fl">10</span>, <span class="st">"all"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="multiple-models">3. Multiple models<a class="anchor" aria-label="anchor" href="#multiple-models"></a>
</h2>
<p>The <code>evalmod</code> function calculate performance evaluation
for multiple models when multiple model names are specified with the
<code>mmdata</code> or the <code>evalmod</code> function.</p>
<div class="section level3">
<h3 id="data-preparation-1">Data preparation<a class="anchor" aria-label="anchor" href="#data-preparation-1"></a>
</h3>
<p>There are several ways to create a dataset with the
<code>mmdata</code> function for multiple models.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Use a list with multiple score vectors and a list with a single label vector</span></span>
<span><span class="va">msmdat1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mmdata.html">mmdata</a></span><span class="op">(</span><span class="va">scores1</span>, <span class="va">labels1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Explicitly specify model names</span></span>
<span><span class="va">msmdat2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mmdata.html">mmdata</a></span><span class="op">(</span><span class="va">scores1</span>, <span class="va">labels1</span>, modnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mod1"</span>, <span class="st">"mod2"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use a sample dataset created by the create_sim_samples function</span></span>
<span><span class="va">msmdat3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mmdata.html">mmdata</a></span><span class="op">(</span><span class="va">samps2</span><span class="op">[[</span><span class="st">"scores"</span><span class="op">]</span><span class="op">]</span>, <span class="va">samps2</span><span class="op">[[</span><span class="st">"labels"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>  modnames <span class="op">=</span> <span class="va">samps2</span><span class="op">[[</span><span class="st">"modnames"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="roc-and-precision-recall-calculations">ROC and Precision-Recall calculations<a class="anchor" aria-label="anchor" href="#roc-and-precision-recall-calculations"></a>
</h3>
<p>The <code>evalmod</code> function automatically detects multiple
models.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate ROC and Precision-Recall curves for multiple models</span></span>
<span><span class="va">mscurves</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/evalmod.html">evalmod</a></span><span class="op">(</span><span class="va">msmdat3</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="s3-generics-1">S3 generics<a class="anchor" aria-label="anchor" href="#s3-generics-1"></a>
</h3>
<p>All the S3 generics are effective for the S3 object generated by this
approach.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Show ROC and Precision-Recall curves with the ggplot2 package</span></span>
<span><span class="fu"><a href="../reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">mscurves</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-13-1.png" width="672"></p>
<div class="section level4">
<h4 id="example-of-the-as-data-frame-function-1">Example of the as.data.frame function<a class="anchor" aria-label="anchor" href="#example-of-the-as-data-frame-function-1"></a>
</h4>
<p>The <code>as.data.frame</code> function also works with this
object.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convert mscurves to a data frame</span></span>
<span><span class="va">mscurves.df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="va">mscurves</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use knitr::kable to display the result in a table format</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mscurves.df</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">x</th>
<th align="right">y</th>
<th align="left">modname</th>
<th align="left">dsid</th>
<th align="left">type</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0.000</td>
<td align="right">0.0</td>
<td align="left">random</td>
<td align="left">1</td>
<td align="left">ROC</td>
</tr>
<tr class="even">
<td align="right">0.000</td>
<td align="right">0.1</td>
<td align="left">random</td>
<td align="left">1</td>
<td align="left">ROC</td>
</tr>
<tr class="odd">
<td align="right">0.000</td>
<td align="right">0.2</td>
<td align="left">random</td>
<td align="left">1</td>
<td align="left">ROC</td>
</tr>
<tr class="even">
<td align="right">0.000</td>
<td align="right">0.3</td>
<td align="left">random</td>
<td align="left">1</td>
<td align="left">ROC</td>
</tr>
<tr class="odd">
<td align="right">0.001</td>
<td align="right">0.3</td>
<td align="left">random</td>
<td align="left">1</td>
<td align="left">ROC</td>
</tr>
<tr class="even">
<td align="right">0.002</td>
<td align="right">0.3</td>
<td align="left">random</td>
<td align="left">1</td>
<td align="left">ROC</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section level2">
<h2 id="multiple-test-sets">4. Multiple test sets<a class="anchor" aria-label="anchor" href="#multiple-test-sets"></a>
</h2>
<p>The <code>evalmod</code> function calculate performance evaluation
for multiple test datasets when different test dataset IDs are specified
with the <code>mmdata</code> or the <code>evalmod</code> function.</p>
<div class="section level3">
<h3 id="data-preparation-2">Data preparation<a class="anchor" aria-label="anchor" href="#data-preparation-2"></a>
</h3>
<p>There are several ways to create a dataset with the
<code>mmdata</code> function for multiple test datasets.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Specify test dataset IDs names</span></span>
<span><span class="va">smmdat1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mmdata.html">mmdata</a></span><span class="op">(</span><span class="va">scores1</span>, <span class="va">labels2</span>, dsids <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use a sample dataset created by the create_sim_samples function</span></span>
<span><span class="va">smmdat2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mmdata.html">mmdata</a></span><span class="op">(</span><span class="va">samps3</span><span class="op">[[</span><span class="st">"scores"</span><span class="op">]</span><span class="op">]</span>, <span class="va">samps3</span><span class="op">[[</span><span class="st">"labels"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>  dsids <span class="op">=</span> <span class="va">samps3</span><span class="op">[[</span><span class="st">"dsids"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="roc-and-precision-recall-calculations-1">ROC and Precision-Recall calculations<a class="anchor" aria-label="anchor" href="#roc-and-precision-recall-calculations-1"></a>
</h3>
<p>The <code>evalmod</code> function automatically detects multiple test
datasets.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate curves for multiple test datasets and keep all the curves</span></span>
<span><span class="va">smcurves</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/evalmod.html">evalmod</a></span><span class="op">(</span><span class="va">smmdat2</span>, raw_curves <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="s3-generics-2">S3 generics<a class="anchor" aria-label="anchor" href="#s3-generics-2"></a>
</h3>
<p>All the S3 generics are effective for the S3 object generated by this
approach.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Show an average Precision-Recall curve with the 95% confidence bounds</span></span>
<span><span class="fu"><a href="../reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">smcurves</span>, <span class="st">"PRC"</span>, show_cb <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Show raw Precision-Recall curves</span></span>
<span><span class="fu"><a href="../reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">smcurves</span>, <span class="st">"PRC"</span>, show_cb <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-17-1.png" width="672"><img src="introduction_files/figure-html/unnamed-chunk-17-2.png" width="672"></p>
<div class="section level4">
<h4 id="example-of-the-as-data-frame-function-2">Example of the as.data.frame function<a class="anchor" aria-label="anchor" href="#example-of-the-as-data-frame-function-2"></a>
</h4>
<p>The <code>as.data.frame</code> function also works with this
object.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convert smcurves to a data frame</span></span>
<span><span class="va">smcurves.df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="va">smcurves</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use knitr::kable to display the result in a table format</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">smcurves.df</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">x</th>
<th align="right">y</th>
<th align="left">modname</th>
<th align="left">dsid</th>
<th align="left">type</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0.000</td>
<td align="right">0</td>
<td align="left">m1</td>
<td align="left">1</td>
<td align="left">ROC</td>
</tr>
<tr class="even">
<td align="right">0.001</td>
<td align="right">0</td>
<td align="left">m1</td>
<td align="left">1</td>
<td align="left">ROC</td>
</tr>
<tr class="odd">
<td align="right">0.002</td>
<td align="right">0</td>
<td align="left">m1</td>
<td align="left">1</td>
<td align="left">ROC</td>
</tr>
<tr class="even">
<td align="right">0.003</td>
<td align="right">0</td>
<td align="left">m1</td>
<td align="left">1</td>
<td align="left">ROC</td>
</tr>
<tr class="odd">
<td align="right">0.004</td>
<td align="right">0</td>
<td align="left">m1</td>
<td align="left">1</td>
<td align="left">ROC</td>
</tr>
<tr class="even">
<td align="right">0.005</td>
<td align="right">0</td>
<td align="left">m1</td>
<td align="left">1</td>
<td align="left">ROC</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section level2">
<h2 id="multiple-models-and-multiple-test-sets">5. Multiple models and multiple test sets<a class="anchor" aria-label="anchor" href="#multiple-models-and-multiple-test-sets"></a>
</h2>
<p>The <code>evalmod</code> function calculates performance evaluation
for multiple models and multiple test datasets when different model
names and test dataset IDs are specified with the <code>mmdata</code> or
the <code>evalmod</code> function.</p>
<div class="section level3">
<h3 id="data-preparation-3">Data preparation<a class="anchor" aria-label="anchor" href="#data-preparation-3"></a>
</h3>
<p>There are several ways to create a dataset with the
<code>mmdata</code> function for multiple models and multiple
datasets.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Specify model names and test dataset IDs names</span></span>
<span><span class="va">mmmdat1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mmdata.html">mmdata</a></span><span class="op">(</span><span class="va">scores1</span>, <span class="va">labels2</span>,</span>
<span>  modnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mod1"</span>, <span class="st">"mod2"</span><span class="op">)</span>,</span>
<span>  dsids <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use a sample dataset created by the create_sim_samples function</span></span>
<span><span class="va">mmmdat2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mmdata.html">mmdata</a></span><span class="op">(</span><span class="va">samps4</span><span class="op">[[</span><span class="st">"scores"</span><span class="op">]</span><span class="op">]</span>, <span class="va">samps4</span><span class="op">[[</span><span class="st">"labels"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>  modnames <span class="op">=</span> <span class="va">samps4</span><span class="op">[[</span><span class="st">"modnames"</span><span class="op">]</span><span class="op">]</span>, dsids <span class="op">=</span> <span class="va">samps4</span><span class="op">[[</span><span class="st">"dsids"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="roc-and-precision-recall-calculations-2">ROC and Precision-Recall calculations<a class="anchor" aria-label="anchor" href="#roc-and-precision-recall-calculations-2"></a>
</h3>
<p>The <code>evalmod</code> function automatically detects multiple
models and multiple test datasets.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate curves for multiple models and multiple test datasets</span></span>
<span><span class="va">mmcurves</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/evalmod.html">evalmod</a></span><span class="op">(</span><span class="va">mmmdat2</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="s3-generics-3">S3 generics<a class="anchor" aria-label="anchor" href="#s3-generics-3"></a>
</h3>
<p>All the S3 generics are effective for the S3 object generated by this
approach.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Show average Precision-Recall curves</span></span>
<span><span class="fu"><a href="../reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">mmcurves</span>, <span class="st">"PRC"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Show average Precision-Recall curves with the 95% confidence bounds</span></span>
<span><span class="fu"><a href="../reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">mmcurves</span>, <span class="st">"PRC"</span>, show_cb <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-21-1.png" width="672"><img src="introduction_files/figure-html/unnamed-chunk-21-2.png" width="672"></p>
<div class="section level4">
<h4 id="example-of-the-as-data-frame-function-3">Example of the as.data.frame function<a class="anchor" aria-label="anchor" href="#example-of-the-as-data-frame-function-3"></a>
</h4>
<p>The <code>as.data.frame</code> function also works with this
object.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convert smcurves to a data frame</span></span>
<span><span class="va">mmcurves.df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="va">mmcurves</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use knitr::kable to display the result in a table format</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mmcurves.df</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">x</th>
<th align="right">y</th>
<th align="right">ymin</th>
<th align="right">ymax</th>
<th align="left">modname</th>
<th align="left">type</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0.000</td>
<td align="right">0.000</td>
<td align="right">0.0000000</td>
<td align="right">0.0000000</td>
<td align="left">random</td>
<td align="left">ROC</td>
</tr>
<tr class="even">
<td align="right">0.000</td>
<td align="right">0.125</td>
<td align="right">0.0555227</td>
<td align="right">0.1944773</td>
<td align="left">random</td>
<td align="left">ROC</td>
</tr>
<tr class="odd">
<td align="right">0.001</td>
<td align="right">0.125</td>
<td align="right">0.0555227</td>
<td align="right">0.1944773</td>
<td align="left">random</td>
<td align="left">ROC</td>
</tr>
<tr class="even">
<td align="right">0.002</td>
<td align="right">0.125</td>
<td align="right">0.0555227</td>
<td align="right">0.1944773</td>
<td align="left">random</td>
<td align="left">ROC</td>
</tr>
<tr class="odd">
<td align="right">0.003</td>
<td align="right">0.125</td>
<td align="right">0.0555227</td>
<td align="right">0.1944773</td>
<td align="left">random</td>
<td align="left">ROC</td>
</tr>
<tr class="even">
<td align="right">0.004</td>
<td align="right">0.125</td>
<td align="right">0.0555227</td>
<td align="right">0.1944773</td>
<td align="left">random</td>
<td align="left">ROC</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section level2">
<h2 id="confidence-interval-bands">6. Confidence interval bands<a class="anchor" aria-label="anchor" href="#confidence-interval-bands"></a>
</h2>
<p>The <code>evalmod</code> function automatically calculates confidence
bands when a model contains multiple test sets in provided dataset.
Confidence intervals are calculated for additional supporting points,
which are specified by the â€˜x_binsâ€™ option of the <code>evalmod</code>
function.</p>
<div class="section level3">
<h3 id="example-of-confidence-bands-when-x_bins-is-2">Example of confidence bands when x_bins is 2<a class="anchor" aria-label="anchor" href="#example-of-confidence-bands-when-x_bins-is-2"></a>
</h3>
<p>The dataset <code>smmdat2</code> contains 20 samples for a single
model/classifier.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Show all curves</span></span>
<span><span class="va">smcurves_all</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/evalmod.html">evalmod</a></span><span class="op">(</span><span class="va">smmdat2</span>, raw_curves <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">smcurves_all</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-23-1.png" width="672"></p>
<p>Additional supporting points are calculated for
<code>x = (0, 0.5, 1.0)</code> when <code>x_bins</code> is set to 2.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># x_bins: 2</span></span>
<span><span class="va">smcurves_xb2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/evalmod.html">evalmod</a></span><span class="op">(</span><span class="va">smmdat2</span>, x_bins <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">smcurves_xb2</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-24-1.png" width="672"></p>
</div>
<div class="section level3">
<h3 id="example-of-confidence-bands-when-x_bins-is-10">Example of confidence bands when x_bins is 10<a class="anchor" aria-label="anchor" href="#example-of-confidence-bands-when-x_bins-is-10"></a>
</h3>
<p>Additional supporting points are calculated for
<code>x = (0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0)</code>
when <code>x_bins</code> is set to 10.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># x_bins: 10</span></span>
<span><span class="va">smcurves_xb10</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/evalmod.html">evalmod</a></span><span class="op">(</span><span class="va">smmdat2</span>, x_bins <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">smcurves_xb10</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-25-1.png" width="672"></p>
</div>
<div class="section level3">
<h3 id="example-of-the-alpha-value">Example of the alpha value<a class="anchor" aria-label="anchor" href="#example-of-the-alpha-value"></a>
</h3>
<p>The <code>evalmod</code> function accepts the <code>cb_alpha</code>
option to specify the alpha value of the point-wise confidence bounds
calculation. For instance, 95% confidence bands are calculated when
<code>cb_alpha</code> is 0.05.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># cb_alpha: 0.1 for 90% confidence band</span></span>
<span><span class="va">smcurves_cb1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/evalmod.html">evalmod</a></span><span class="op">(</span><span class="va">smmdat2</span>, x_bins <span class="op">=</span> <span class="fl">10</span>, cb_alpha <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">smcurves_cb1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># cb_alpha: 0.01 for 99% confidence band</span></span>
<span><span class="va">smcurves_cb2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/evalmod.html">evalmod</a></span><span class="op">(</span><span class="va">smmdat2</span>, x_bins <span class="op">=</span> <span class="fl">10</span>, cb_alpha <span class="op">=</span> <span class="fl">0.01</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">smcurves_cb2</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-26-1.png" width="672"><img src="introduction_files/figure-html/unnamed-chunk-26-2.png" width="672"></p>
</div>
</div>
<div class="section level2">
<h2 id="cross-validation">7. Cross validation<a class="anchor" aria-label="anchor" href="#cross-validation"></a>
</h2>
<p>The <code>format_nfold</code> function takes a data frame with
scores, label and n-fold columns and convert it to a list for
<code>evalmod</code> and <code>mmdata</code>.</p>
<div class="section level4">
<h4 id="example-of-a-data-frame-with-5-fold-data">Example of a data frame with 5-fold data<a class="anchor" aria-label="anchor" href="#example-of-a-data-frame-with-5-fold-data"></a>
</h4>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">M2N50F5</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use knitr::kable to display the result in a table format</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">M2N50F5</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">score1</th>
<th align="right">score2</th>
<th align="left">label</th>
<th align="right">fold</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">2.0606025</td>
<td align="right">1.0689227</td>
<td align="left">pos</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">0.3066092</td>
<td align="right">0.1745491</td>
<td align="left">pos</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="right">1.5597733</td>
<td align="right">-1.5666375</td>
<td align="left">pos</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">-0.6044989</td>
<td align="right">1.1572727</td>
<td align="left">pos</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="right">-0.2229031</td>
<td align="right">0.6070042</td>
<td align="left">pos</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="right">-0.7679551</td>
<td align="right">-1.7908147</td>
<td align="left">pos</td>
<td align="right">5</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="example-of-the-format_nfold-function-with-5-fold-datasets">Example of the format_nfold function with 5-fold datasets<a class="anchor" aria-label="anchor" href="#example-of-the-format_nfold-function-with-5-fold-datasets"></a>
</h4>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convert data frame to list</span></span>
<span><span class="va">nfold_list1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/format_nfold.html">format_nfold</a></span><span class="op">(</span></span>
<span>  nfold_df <span class="op">=</span> <span class="va">M2N50F5</span>, score_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  lab_col <span class="op">=</span> <span class="fl">3</span>, fold_col <span class="op">=</span> <span class="fl">4</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use column names</span></span>
<span><span class="va">nfold_list2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/format_nfold.html">format_nfold</a></span><span class="op">(</span></span>
<span>  nfold_df <span class="op">=</span> <span class="va">M2N50F5</span>,</span>
<span>  score_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"score1"</span>, <span class="st">"score2"</span><span class="op">)</span>,</span>
<span>  lab_col <span class="op">=</span> <span class="st">"label"</span>, fold_col <span class="op">=</span> <span class="st">"fold"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use the result for evalmod</span></span>
<span><span class="va">cvcurves</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/evalmod.html">evalmod</a></span><span class="op">(</span></span>
<span>  scores <span class="op">=</span> <span class="va">nfold_list2</span><span class="op">$</span><span class="va">scores</span>, labels <span class="op">=</span> <span class="va">nfold_list2</span><span class="op">$</span><span class="va">labels</span>,</span>
<span>  modnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"m1"</span>, <span class="st">"m2"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>,</span>
<span>  dsids <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">cvcurves</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-28-1.png" width="672"></p>
</div>
<div class="section level3">
<h3 id="evalmod-and-mmdata-with-cross-validation-datasets">evalmod and mmdata with cross validation datasets<a class="anchor" aria-label="anchor" href="#evalmod-and-mmdata-with-cross-validation-datasets"></a>
</h3>
<p>Both <code>evalmod</code> and <code>mmdata</code> function can
directly take the arguments of the <code>format_nfold</code>
function.</p>
<div class="section level4">
<h4 id="example-of-evalmod-and-mmdata-with-5-fold-data">Example of evalmod and mmdata with 5-fold data<a class="anchor" aria-label="anchor" href="#example-of-evalmod-and-mmdata-with-5-fold-data"></a>
</h4>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># mmdata</span></span>
<span><span class="va">cvcurves2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mmdata.html">mmdata</a></span><span class="op">(</span></span>
<span>  nfold_df <span class="op">=</span> <span class="va">M2N50F5</span>, score_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  lab_col <span class="op">=</span> <span class="fl">3</span>, fold_col <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  modnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"m1"</span>, <span class="st">"m2"</span><span class="op">)</span>, dsids <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># evalmod</span></span>
<span><span class="va">cvcurves3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/evalmod.html">evalmod</a></span><span class="op">(</span></span>
<span>  nfold_df <span class="op">=</span> <span class="va">M2N50F5</span>, score_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  lab_col <span class="op">=</span> <span class="fl">3</span>, fold_col <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  modnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"m1"</span>, <span class="st">"m2"</span><span class="op">)</span>, dsids <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">cvcurves3</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-29-1.png" width="672"></p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="basic-performance-measures">8. Basic performance measures<a class="anchor" aria-label="anchor" href="#basic-performance-measures"></a>
</h2>
<p>The <code>evalmod</code> function also calculates basic evaluation
measures - error, accuracy, specificity, sensitivity, and precision.</p>
<table class="table">
<thead><tr class="header">
<th align="left">Measure</th>
<th align="left">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">error</td>
<td align="left">Error rate</td>
</tr>
<tr class="even">
<td align="left">accuracy</td>
<td align="left">Accuracy</td>
</tr>
<tr class="odd">
<td align="left">specificity</td>
<td align="left">Specificity, TNR, 1 - FPR</td>
</tr>
<tr class="even">
<td align="left">sensitivity</td>
<td align="left">Sensitivity, TPR, Recall</td>
</tr>
<tr class="odd">
<td align="left">precision</td>
<td align="left">Precision, PPV</td>
</tr>
<tr class="even">
<td align="left">mcc</td>
<td align="left">Matthews correlation coefficient</td>
</tr>
<tr class="odd">
<td align="left">fscore</td>
<td align="left">F-score</td>
</tr>
</tbody>
</table>
<div class="section level3">
<h3 id="basic-measure-calculations">Basic measure calculations<a class="anchor" aria-label="anchor" href="#basic-measure-calculations"></a>
</h3>
<p>The <code>mode = "basic"</code> option makes the <code>evalmod</code>
function calculate the basic evaluation measures instead of performing
ROC and Precision-Recall calculations.</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate basic evaluation measures</span></span>
<span><span class="va">mmpoins</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/evalmod.html">evalmod</a></span><span class="op">(</span><span class="va">mmmdat2</span>, mode <span class="op">=</span> <span class="st">"basic"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="s3-generics-4">S3 generics<a class="anchor" aria-label="anchor" href="#s3-generics-4"></a>
</h3>
<p>All the S3 generics except for <code>auc</code>, <code>part</code>
and <code>pauc</code> are effective for the S3 object generated by this
approach.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Show normalized ranks vs. error rate and accuracy</span></span>
<span><span class="fu"><a href="../reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">mmpoins</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"error"</span>, <span class="st">"accuracy"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Show normalized ranks vs. specificity, sensitivity, and precision</span></span>
<span><span class="fu"><a href="../reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">mmpoins</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"specificity"</span>, <span class="st">"sensitivity"</span>, <span class="st">"precision"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Show normalized ranks vs. Matthews correlation coefficient and F-score</span></span>
<span><span class="fu"><a href="../reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">mmpoins</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcc"</span>, <span class="st">"fscore"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-31-1.png" width="672"><img src="introduction_files/figure-html/unnamed-chunk-31-2.png" width="672"><img src="introduction_files/figure-html/unnamed-chunk-31-3.png" width="672"></p>
<div class="section level4">
<h4 id="normalized-ranks-and-predicted-scores">Normalized ranks and predicted scores<a class="anchor" aria-label="anchor" href="#normalized-ranks-and-predicted-scores"></a>
</h4>
<p>In addition to the basic measures, the <code>autoplot</code> function
can plot normalized ranks vs.Â scores and labels.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Show normalized ranks vs. scores and labels</span></span>
<span><span class="fu"><a href="../reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">mmpoins</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"score"</span>, <span class="st">"label"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-32-1.png" width="672"></p>
</div>
<div class="section level4">
<h4 id="example-of-the-as-data-frame-function-4">Example of the as.data.frame function<a class="anchor" aria-label="anchor" href="#example-of-the-as-data-frame-function-4"></a>
</h4>
<p>The <code>as.data.frame</code> function also works for the precrec
objects of the basic measures.</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convert mmpoins to a data frame</span></span>
<span><span class="va">mmpoins.df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="va">mmpoins</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use knitr::kable to display the result in a table format</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mmpoins.df</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">x</th>
<th align="right">y</th>
<th align="right">ymin</th>
<th align="right">ymax</th>
<th align="left">modname</th>
<th align="left">type</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0.00</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">random</td>
<td align="left">score</td>
</tr>
<tr class="even">
<td align="right">0.05</td>
<td align="right">2.0436212</td>
<td align="right">1.7508155</td>
<td align="right">2.336427</td>
<td align="left">random</td>
<td align="left">score</td>
</tr>
<tr class="odd">
<td align="right">0.10</td>
<td align="right">1.4572679</td>
<td align="right">1.2662236</td>
<td align="right">1.648312</td>
<td align="left">random</td>
<td align="left">score</td>
</tr>
<tr class="even">
<td align="right">0.15</td>
<td align="right">1.1564246</td>
<td align="right">0.9935827</td>
<td align="right">1.319266</td>
<td align="left">random</td>
<td align="left">score</td>
</tr>
<tr class="odd">
<td align="right">0.20</td>
<td align="right">0.9931815</td>
<td align="right">0.8524451</td>
<td align="right">1.133918</td>
<td align="left">random</td>
<td align="left">score</td>
</tr>
<tr class="even">
<td align="right">0.25</td>
<td align="right">0.8506589</td>
<td align="right">0.7116918</td>
<td align="right">0.989626</td>
<td align="left">random</td>
<td align="left">score</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section level2">
<h2 id="partial-aucs">9. Partial AUCs<a class="anchor" aria-label="anchor" href="#partial-aucs"></a>
</h2>
<p>The <code>part</code> function calculates partial AUCs and
standardized partial AUCs of both ROC and precision-recall curves.
Standardized pAUCs (spAUCs) are standardized to the score range between
0 and 1.</p>
<div class="section level3">
<h3 id="partial-auc-calculations">partial AUC calculations<a class="anchor" aria-label="anchor" href="#partial-auc-calculations"></a>
</h3>
<p>It requires an S3 object produced by the <code>evalmod</code>
function and uses <code>xlim</code> and <code>ylim</code> to specify the
partial area of your choice. The <code>pauc</code> function outputs a
data frame with the pAUC scores.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate ROC and Precision-Recall curves</span></span>
<span><span class="va">curves</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/evalmod.html">evalmod</a></span><span class="op">(</span>scores <span class="op">=</span> <span class="va">P10N10</span><span class="op">$</span><span class="va">scores</span>, labels <span class="op">=</span> <span class="va">P10N10</span><span class="op">$</span><span class="va">labels</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Calculate partial AUCs</span></span>
<span><span class="va">curves.part</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/part.html">part</a></span><span class="op">(</span><span class="va">curves</span>, xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.0</span>, <span class="fl">0.25</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Retrieve a dataframe of pAUCs</span></span>
<span><span class="va">paucs.df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pauc.html">pauc</a></span><span class="op">(</span><span class="va">curves.part</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use knitr::kable to display the result in a table format</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">paucs.df</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">modnames</th>
<th align="right">dsids</th>
<th align="left">curvetypes</th>
<th align="right">paucs</th>
<th align="right">spaucs</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">m1</td>
<td align="right">1</td>
<td align="left">ROC</td>
<td align="right">0.1006250</td>
<td align="right">0.4025000</td>
</tr>
<tr class="even">
<td align="left">m1</td>
<td align="right">1</td>
<td align="left">PRC</td>
<td align="right">0.2345849</td>
<td align="right">0.9383396</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="s3-generics-5">S3 generics<a class="anchor" aria-label="anchor" href="#s3-generics-5"></a>
</h3>
<p>All the S3 generics are effective for the S3 object generated by this
approach.</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Show ROC and Precision-Recall curves</span></span>
<span><span class="fu"><a href="../reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">curves.part</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-35-1.png" width="672"></p>
</div>
</div>
<div class="section level2">
<h2 id="fast-auc-roc-calculation">10. Fast AUC (ROC) calculation<a class="anchor" aria-label="anchor" href="#fast-auc-roc-calculation"></a>
</h2>
<p>The area under the ROC curve can be calculated from the U statistic,
which is the test statistic of the Mannâ€“Whitney U test.</p>
<div class="section level3">
<h3 id="auc-calculation-with-the-u-statistic">AUC calculation with the U statistic<a class="anchor" aria-label="anchor" href="#auc-calculation-with-the-u-statistic"></a>
</h3>
<p>The <code>evalmod</code> function calculates AUCs with the U
statistic when mode = â€˜aucrocâ€™.</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate AUC (ROC)</span></span>
<span><span class="va">aucs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/evalmod.html">evalmod</a></span><span class="op">(</span>scores <span class="op">=</span> <span class="va">P10N10</span><span class="op">$</span><span class="va">scores</span>, labels <span class="op">=</span> <span class="va">P10N10</span><span class="op">$</span><span class="va">labels</span>, mode <span class="op">=</span> <span class="st">"aucroc"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Convert to data.frame</span></span>
<span><span class="va">aucs.df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="va">aucs</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use knitr::kable to display the result in a table format</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">aucs.df</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">modnames</th>
<th align="left">dsids</th>
<th align="right">aucs</th>
<th align="right">ustats</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">m1</td>
<td align="left">1</td>
<td align="right">0.72</td>
<td align="right">72</td>
</tr></tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="confidence-intervals-of-aucs">11. Confidence intervals of AUCs<a class="anchor" aria-label="anchor" href="#confidence-intervals-of-aucs"></a>
</h2>
<p>The <code>auc_ci</code> function calculates confidence intervals of
the calculated ROCs by the <code>evalmod</code> function.</p>
<div class="section level3">
<h3 id="default-ci-calculation-with-normal-distribution-and-alpha0-05">Default CI calculation with normal distribution and alpha=0.05<a class="anchor" aria-label="anchor" href="#default-ci-calculation-with-normal-distribution-and-alpha0-05"></a>
</h3>
<p>The <code>auc_ci</code> function calculates CIs for both ROC and
precision-recall AUCs. The specified data must contain multiple
datasets, such as cross-validation data.</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate CI of AUCs with normal distibution</span></span>
<span><span class="va">auc_ci</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/auc_ci.html">auc_ci</a></span><span class="op">(</span><span class="va">smcurves</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use knitr::kable to display the result in a table format</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">auc_ci</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="13%">
<col width="16%">
<col width="14%">
<col width="14%">
<col width="17%">
<col width="17%">
<col width="4%">
</colgroup>
<thead><tr class="header">
<th align="left">modnames</th>
<th align="left">curvetypes</th>
<th align="right">mean</th>
<th align="right">error</th>
<th align="right">lower_bound</th>
<th align="right">upper_bound</th>
<th align="right">n</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">m1</td>
<td align="left">ROC</td>
<td align="right">0.7985000</td>
<td align="right">0.0304061</td>
<td align="right">0.7680939</td>
<td align="right">0.8289061</td>
<td align="right">20</td>
</tr>
<tr class="even">
<td align="left">m1</td>
<td align="left">PRC</td>
<td align="right">0.8311066</td>
<td align="right">0.0341643</td>
<td align="right">0.7969423</td>
<td align="right">0.8652710</td>
<td align="right">20</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="ci-calculation-with-a-different-alpha-0-01">CI calculation with a different alpha (0.01)<a class="anchor" aria-label="anchor" href="#ci-calculation-with-a-different-alpha-0-01"></a>
</h3>
<p>The <code>auc_ci</code> function accepts a different significance
level.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate CI of AUCs with alpha = 0.01</span></span>
<span><span class="va">auc_ci_a</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/auc_ci.html">auc_ci</a></span><span class="op">(</span><span class="va">smcurves</span>, alpha <span class="op">=</span> <span class="fl">0.01</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use knitr::kable to display the result in a table format</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">auc_ci_a</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="13%">
<col width="16%">
<col width="14%">
<col width="14%">
<col width="17%">
<col width="17%">
<col width="4%">
</colgroup>
<thead><tr class="header">
<th align="left">modnames</th>
<th align="left">curvetypes</th>
<th align="right">mean</th>
<th align="right">error</th>
<th align="right">lower_bound</th>
<th align="right">upper_bound</th>
<th align="right">n</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">m1</td>
<td align="left">ROC</td>
<td align="right">0.7985000</td>
<td align="right">0.0399603</td>
<td align="right">0.7585397</td>
<td align="right">0.8384603</td>
<td align="right">20</td>
</tr>
<tr class="even">
<td align="left">m1</td>
<td align="left">PRC</td>
<td align="right">0.8311066</td>
<td align="right">0.0448996</td>
<td align="right">0.7862071</td>
<td align="right">0.8760062</td>
<td align="right">20</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="ci-calculation-with-t-distribution">CI calculation with t-distribution<a class="anchor" aria-label="anchor" href="#ci-calculation-with-t-distribution"></a>
</h3>
<p>The <code>auc_ci</code> function accepts either normal or
t-distribution for CI calculation.</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate CI of AUCs t-distribution</span></span>
<span><span class="va">auc_ci_t</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/auc_ci.html">auc_ci</a></span><span class="op">(</span><span class="va">smcurves</span>, dtype <span class="op">=</span> <span class="st">"t"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use knitr::kable to display the result in a table format</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">auc_ci_t</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="13%">
<col width="16%">
<col width="14%">
<col width="14%">
<col width="17%">
<col width="17%">
<col width="4%">
</colgroup>
<thead><tr class="header">
<th align="left">modnames</th>
<th align="left">curvetypes</th>
<th align="right">mean</th>
<th align="right">error</th>
<th align="right">lower_bound</th>
<th align="right">upper_bound</th>
<th align="right">n</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">m1</td>
<td align="left">ROC</td>
<td align="right">0.7985000</td>
<td align="right">0.0324703</td>
<td align="right">0.7660297</td>
<td align="right">0.8309703</td>
<td align="right">20</td>
</tr>
<tr class="even">
<td align="left">m1</td>
<td align="left">PRC</td>
<td align="right">0.8311066</td>
<td align="right">0.0364837</td>
<td align="right">0.7946229</td>
<td align="right">0.8675904</td>
<td align="right">20</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="balanced-and-imbalanced-datasets">12. Balanced and imbalanced datasets<a class="anchor" aria-label="anchor" href="#balanced-and-imbalanced-datasets"></a>
</h2>
<p>It is easy to simulate various scenarios, such as balanced
vs.Â imbalanced datasets, by using the <code>evalmod</code> and
<code>create_sim_samples</code> functions.</p>
<div class="section level3">
<h3 id="data-preparation-4">Data preparation<a class="anchor" aria-label="anchor" href="#data-preparation-4"></a>
</h3>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Balanced dataset</span></span>
<span><span class="va">samps5</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_sim_samples.html">create_sim_samples</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">100</span>, <span class="fl">100</span>, <span class="st">"all"</span><span class="op">)</span></span>
<span><span class="va">simmdat1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mmdata.html">mmdata</a></span><span class="op">(</span><span class="va">samps5</span><span class="op">[[</span><span class="st">"scores"</span><span class="op">]</span><span class="op">]</span>, <span class="va">samps5</span><span class="op">[[</span><span class="st">"labels"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>  modnames <span class="op">=</span> <span class="va">samps5</span><span class="op">[[</span><span class="st">"modnames"</span><span class="op">]</span><span class="op">]</span>, dsids <span class="op">=</span> <span class="va">samps5</span><span class="op">[[</span><span class="st">"dsids"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Imbalanced dataset</span></span>
<span><span class="va">samps6</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_sim_samples.html">create_sim_samples</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">25</span>, <span class="fl">100</span>, <span class="st">"all"</span><span class="op">)</span></span>
<span><span class="va">simmdat2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mmdata.html">mmdata</a></span><span class="op">(</span><span class="va">samps6</span><span class="op">[[</span><span class="st">"scores"</span><span class="op">]</span><span class="op">]</span>, <span class="va">samps6</span><span class="op">[[</span><span class="st">"labels"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>  modnames <span class="op">=</span> <span class="va">samps6</span><span class="op">[[</span><span class="st">"modnames"</span><span class="op">]</span><span class="op">]</span>, dsids <span class="op">=</span> <span class="va">samps6</span><span class="op">[[</span><span class="st">"dsids"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="roc-and-precision-recall-calculations-3">ROC and Precision-Recall calculations<a class="anchor" aria-label="anchor" href="#roc-and-precision-recall-calculations-3"></a>
</h3>
<p>The <code>evalmod</code> function automatically detects multiple
models and multiple test datasets.</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Balanced dataset</span></span>
<span><span class="va">simcurves1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/evalmod.html">evalmod</a></span><span class="op">(</span><span class="va">simmdat1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Imbalanced dataset</span></span>
<span><span class="va">simcurves2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/evalmod.html">evalmod</a></span><span class="op">(</span><span class="va">simmdat2</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="balanced-vs--imbalanced-datasets">Balanced vs.Â imbalanced datasets<a class="anchor" aria-label="anchor" href="#balanced-vs--imbalanced-datasets"></a>
</h3>
<p>ROC plots are unchanged between balanced and imbalanced datasets,
whereas Precision-Recall plots show a clear difference between them. See
our <a href="https://doi.org/10.1371/journal.pone.0118432" class="external-link">article</a>
or <a href="https://classeval.wordpress.com" class="external-link">website</a> for potential
pitfalls by using ROC plots with imbalanced datasets.</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Balanced dataset</span></span>
<span><span class="fu"><a href="../reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">simcurves1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Imbalanced dataset</span></span>
<span><span class="fu"><a href="../reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">simcurves2</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-42-1.png" width="672"><img src="introduction_files/figure-html/unnamed-chunk-42-2.png" width="672"></p>
</div>
</div>
<div class="section level2">
<h2 id="citation">13. Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h2>
<p><em>Precrec: fast and accurate precision-recall and ROC curve
calculations in R</em></p>
<p>Takaya Saito; Marc Rehmsmeier</p>
<p>Bioinformatics 2017; 33 (1): 145-147.</p>
<p>doi: <a href="https://doi.org/10.1093/bioinformatics/btw570" class="external-link">10.1093/bioinformatics/btw570</a></p>
</div>
<div class="section level2">
<h2 id="external-links">14. External links<a class="anchor" aria-label="anchor" href="#external-links"></a>
</h2>
<ul>
<li><p><a href="https://classeval.wordpress.com/" class="external-link">Classifier evaluation
with imbalanced datasets</a> - our web site that contains several pages
with useful tips for performance evaluation on binary
classifiers.</p></li>
<li><p><a href="https://doi.org/10.1371/journal.pone.0118432" class="external-link">The
Precision-Recall Plot Is More Informative than the ROC Plot When
Evaluating Binary Classifiers on Imbalanced Datasets</a> - our paper
that summarized potential pitfalls of ROC plots with imbalanced datasets
and advantages of using precision-recall plots instead.</p></li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Takaya Saito, Marc Rehmsmeier.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
